# Имя workflow
name: Main Taski Workflow
# Перечень событий-триггеров, при которых должен запускаться workflow
on:
  # Событие push возникает,
  # когда изменения исходного кода приходят на сервер GitHub
  push:
    # Отслеживаем изменения только в ветке main
    branches:
      - main
# Перечень задач
jobs:
  tests: 
    # Разворачиваем окружение:
    runs-on: ubuntu-latest

  steps:
  # Копируем код проекта
  - name: Check out code  # Имя шага задаём сами
    uses: actions/checkout@v3  # Берём готовое решение из библиотеки GitHub Actions
  # Устанавливаем Pythonс помощью action
  - name: Set up Python
    users: actions/setup-python@v4
  # В action setup-python@v4 передаем параметр - версию Python
    with:
      python-version: 3.9
  # Обновляем pip, устанавливаем flake8 и flake-isort,
  # устанавливаем зависимости проекта
  - name: Install dependencies
    run: |
      python -m pip install --upgrade pip 
      pip install flake8==6.0.0 flake8-isort==6.0.0
  # Запускаем flake8
  - name: Test with flake8
    # Вызываем flake8 и указываем ему,
    # что нужно проверить файлы только в папке backend/
    run: python -m flake8 backend/